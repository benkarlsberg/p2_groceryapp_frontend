<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <title>Test HTML</title>
  </head>
  <body>
    <h1>This is a test page</h1>
    <!-- <button onclick="getCartItem()">Get Cart Item</button>

    <table
      class="table table-bordered table-striped table-hover"
      style="width: 50%"
    >
    <thead>
      <th scope="col">Item</th>
      <th scope="col">price</th>
    </thead>
    <tbody>
      <tr>
        <td>Test item</td>
        <td>12</td>

      </tr>
      <tr>
        <td>Test item 2</td>
      </tr>
      <tr>
        <td>Name</td>
        <td>23</td>
      </tr>
    </tbody>
    </table> -->
    <button type="button" class="btn btn-dark" onclick="getAllCartItems()">Get all items</button>
    <br /><br />
    <span id="t"></span>

    <!-- 
<button onclick="document.getElementById('allItems').innerHTML = getAllCartItems()">Get Cart Item</button>
<p id="allItems"></p> -->
  </body>

  <script>
    async function getCartItem() {
      const httpResponse = await fetch("http://localhost:8080/item/1");
      const body = await httpResponse.json();
      elements = [];
      console.log(body);
      console.log(body.username);

      extract(body);
      // newElements = extract(body);
      // elements.push(newElements);
      // console.log(elements);
    }

    async function getAllCartItems() {
      document.getElementById("t").innerHTML = '';
      let elementName = [];
      let elementPrice = [];
      // let num = 4;
      let id = 4;
      let myTable =
        '<table class="table table-bordered table-striped table-hover" style="width: 50%;"> <thead> <th scope="col">Item</th> <th scope="col">price</th> </thead>';

      for (let i = 0; i <= id; i++) {
        const url = `http://localhost:8080/item/${i + 1}`;
        const httpResponse = await fetch(url);
        const body = await httpResponse.json();

        // console.log(i);
        // console.log(body);
        newBodyName = JSON.stringify(body, ["item_name"]);
        // console.log(newBodyName);

        newBodyName = newBodyName.replace(/"item_name":/g, "");
        newBodyName = newBodyName.replace(/[{}, ""]/g, "");
        newBodyPrice = JSON.stringify(body, ["price"]);
        newBodyPrice = newBodyPrice.replace(/"price":/g, "");
        newBodyPrice = newBodyPrice.replace(/[{}, ""]/g, "");

        elementName.push(newBodyName);
        elementPrice.push(newBodyPrice);

        myTable +=
          "<tr> <td>" +
          elementName[i] +
          "</td><td>" +
          "$" +
          elementPrice[i] +
          "</td> </tr>";
      }
      document.getElementById("t").innerHTML += myTable;
      document.getElementById("t").innerHTML += "</table>";

      // document.getElementById("t").innerHTML = myTable;
    }

    function extract(body) {
      document.getElementById("item_name").innerHTML = body.item_name;
    }
  </script>
</html>
